---
sidebar: sidebar 
permalink: reference-limits-aws.html 
keywords: limits, maximum, storage, aggregates, disks, volumes, capacity, luns, size, storage virtual machine, SVM, ebs 
summary: 为了提供可靠的操作， Cloud Volumes ONTAP在 AWS 中具有存储配置限制。为了获得最佳性能，请不要将系统配置为最大值。 
---
= AWS 中Cloud Volumes ONTAP的存储限制
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Volumes ONTAP具有存储配置限制，以提供可靠的操作。为了获得最佳性能，请不要将系统配置为最大值。



== 许可证的最大系统容量

最大系统容量包括基于磁盘的存储以及用于数据分层的对象存储。

NetApp不支持超出系统容量限制。如果达到许可容量限制， BlueXP将显示需要操作的消息，并且不再允许您添加其他磁盘。

对于某些配置，磁盘限制会阻止您仅使用磁盘来达到容量限制。在这些情况下，您可以通过以下方式达到容量限制 https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/concept-data-tiering.html["将非活动数据分层到对象存储"^]。有关更多详细信息，请参阅下面的容量和磁盘限制。

.基于容量的许可证的容量限制
通过基于容量的许可，每个Cloud Volumes ONTAP系统都支持分层到对象存储。总分层容量可以扩展到云提供商的存储桶限制。虽然许可证没有施加容量限制，但您应该遵循 https://www.netapp.com/pdf.html?item=/media/17239-tr-4598.pdf["FabricPool最佳实践"^]确保在配置和管理分层时实现最佳性能、可靠性和成本效率。请参阅 https://docs.aws.amazon.com/AmazonS3/latest/userguide/BucketRestrictions.html["AWS 文档"^]了解更多信息。

其他许可证类型的容量限制::


[cols="25,75"]
|===
| 许可证 | 最大系统容量（磁盘+对象存储） 


| 免费增值 | 500 GiB 


| PAYGO 探索 | 2 TiB（Explore 不支持数据分层） 


| PAYGO 标准 | 10 TiB 


| PAYGO 保费 | 368 TiB 


| 基于节点的许可证 | 2 PiB（需要多个许可证） 
|===
.对于 HA，许可证容量限制是针对每个节点还是针对整个 HA 对？
容量限制针对的是整个 HA 对。它不是每个节点的。例如，Premium 许可证允许两个节点最多使用 368 TiB。

.对于 AWS 中的 HA 系统，镜像数据是否计入容量限制？
不，不是这样的。AWS HA 对中的数据在节点之间同步镜像，以便在发生故障时数据可用。例如，如果您在节点 A 上购买了一个 8 TiB 磁盘， BlueXP还会在节点 B 上分配一个 8 TiB 磁盘用于镜像数据。虽然预置了 16 TiB 的容量，但只有 8 TiB 计入许可证限制。



== 总计限制

Cloud Volumes ONTAP使用 EBS 卷作为磁盘并将它们分组为_聚合_。聚合为卷提供存储。

[cols="2*"]
|===
| 参数 | 限制 


| 最大聚合体数量 | 单节点：与磁盘限制相同 HA 对：一个节点中有 18 个 ^1^ 


| 最大骨料尺寸^2^  a| 
* 96 TiB 原始容量
* 弹性卷的原始容量为 128 TiB^3^




| 每个聚合的磁盘数 ^4^  a| 
* 1-6
* 1-8 带弹性卷 ^3^




| 每个聚合的最大 RAID 组数 | 1 
|===
注：

. 您无法在 HA 对中的两个节点上创建 18 个聚合，因为这会超出数据磁盘限制。
. 最大聚合大小取决于其磁盘，不包括用于数据分层的对象存储。
. 如果您的配置支持 Amazon EBS 弹性卷功能，则聚合最多可包含 8 个磁盘，从而提供最多 128 TiB 的容量。默认情况下，当您使用 gp3 或 io1 磁盘时， Cloud Volumes ONTAP 9.11.0 及更高版本的系统会启用 Amazon EBS Elastic Volumes。 https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/concept-aws-elastic-volumes.html["了解有关弹性卷支持的更多信息"^]
. 聚合中的所有磁盘必须具有相同的大小。




== EC2 实例的磁盘和分层限制

容量限制根据您使用的 EC2 实例类型系列以及您使用的是单节点系统还是 HA 对而有所不同。

以下注释提供了有关您将在下表中看到的数字的详细信息：

* 磁盘限制特定于包含用户数据的磁盘。
+
该限制不包括启动磁盘和根磁盘。

* 列出了单独使用磁盘以及使用磁盘和冷数据分层到对象存储时的最大系统容量。
* Cloud Volumes ONTAP使用 EBS 卷作为磁盘，最大磁盘大小为 16 TiB。




=== 基于容量的许可不同部署模式的限制

以下磁盘限制适用于使用基于容量的许可包的Cloud Volumes ONTAP系统。 https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/concept-licensing.html["了解Cloud Volumes ONTAP许可选项"^]


NOTE: 有关单节点和 HA 配置的最大系统容量和数据分层容量限制，请参阅<<cap-license-aws>>。



==== 单节点

[cols="18,18,32,width=100%,options="]
|===


| 实例 | 每个节点的最大磁盘数 | 仅使用磁盘的最大系统容量 


| c5、m5 和 r5 实例 | 21 | 336 TiB 


 a| 
* m5dn.24xlarge
* m6id.32xlarge

| 19 ^1^ | 304 TiB 
|===
. 此实例类型比其他实例类型具有更多的本地 NVMe 磁盘，这意味着支持的数据磁盘数量较少。




==== HA 对

[cols="18,18,32,width=100%,options="]
|===


| 实例 | 每个节点的最大磁盘数 | 仅使用磁盘的最大系统容量 


| c5、m5 和 r5 实例 | 18 | 288 TiB 


 a| 
* m5dn.24xlarge
* m6id.32xlarge

| 16 ^1^ | 256 TiB 
|===
. 此实例类型比其他实例类型具有更多的本地 NVMe 磁盘，这意味着支持的数据磁盘数量较少。




=== 基于节点的许可的不同部署模式的限制

以下磁盘限制适用于使用基于节点的许可的Cloud Volumes ONTAP系统，这是上一代许可模型，允许您按节点许可Cloud Volumes ONTAP 。现有客户仍可获得基于节点的许可。

您可以为Cloud Volumes ONTAP BYOL 单节点或 HA 对系统购买多个基于节点的许可证，以分配超过 368 TiB 的容量，最高可达经过测试和支持的最大系统容量限制 2 PiB。请注意，磁盘限制可能会阻止您仅使用磁盘就达到容量限制。您可以通过以下方式超越磁盘限制 https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/concept-data-tiering.html["将非活动数据分层到对象存储"^]。 https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/task-manage-node-licenses.html["了解如何向Cloud Volumes ONTAP添加额外的系统许可证"^] 。尽管Cloud Volumes ONTAP支持的最大测试和支持系统容量为 2 PiB，但超过 2 PiB 限制会导致系统配置不受支持。

从Cloud Volumes ONTAP 9.12.1 开始，AWS Secret Cloud 和 Top Secret Cloud 区域支持购买多个基于节点的许可证。



==== 带有 PAYGO Premium 的单节点

[cols="18,18,32,32"]
|===
| 实例 | 每个节点的最大磁盘数 | 仅使用磁盘的最大系统容量 | 磁盘和数据分层的最大系统容量 


| c5、m5 和 r5 实例 | 21 ^1^ | 336 TiB | 368 TiB 


 a| 
* m5dn.24xlarge
* m6id.32xlarge

| 19 ^2^ | 304 TiB | 368 TiB 
|===
. 21 个数据磁盘是Cloud Volumes ONTAP_新_部署的限制。如果升级使用 9.7 或更早版本创建的系统，则系统将继续支持 22 个磁盘。由于从 9.8 版本开始添加了核心磁盘，因此使用这些实例类型的新系统支持的数据磁盘减少了一个。
. 此实例类型比其他实例类型具有更多的本地 NVMe 磁盘，这意味着支持的数据磁盘数量较少。




==== 具有 BYOL 的单节点

[cols="18,18,16,16,16,16"]
|===
| 实例 | 每个节点的最大磁盘数 2+| 一个许可证的最大系统容量 2+| 多个许可证的最大系统容量 


2+|  | *仅磁盘* | *磁盘+数据分层* | *仅磁盘* | *磁盘+数据分层* 


| c5、m5 和 r5 实例 | 21 ^1^ | 336 TiB | 368 TiB | 336 TiB | 2 PiB 


 a| 
* m5dn.24xlarge
* m6id.32xlarge

| 19 ^2^ | 304 TiB | 368 TiB | 304 TiB | 2 PiB 
|===
. 21 个数据磁盘是Cloud Volumes ONTAP_新_部署的限制。如果升级使用 9.7 或更早版本创建的系统，则系统将继续支持 22 个磁盘。由于从 9.8 版本开始添加了核心磁盘，因此使用这些实例类型的新系统支持的数据磁盘减少了一个。
. 此实例类型比其他实例类型具有更多的本地 NVMe 磁盘，这意味着支持的数据磁盘数量较少。




==== HA 与 PAYGO Premium 配对

[cols="18,18,32,32"]
|===
| 实例 | 每个节点的最大磁盘数 | 仅使用磁盘的最大系统容量 | 磁盘和数据分层的最大系统容量 


| c5、m5 和 r5 实例 | 18 ^1^ | 288 TiB | 368 TiB 


 a| 
* m5dn.24xlarge
* m6id.32xlarge

| 16 ^2^ | 256 TiB | 368 TiB 
|===
. 18 个数据磁盘是Cloud Volumes ONTAP_新_部署的限制。如果升级使用 9.7 或更早版本创建的系统，则系统将继续支持 19 个磁盘。由于从 9.8 版本开始添加了核心磁盘，因此使用这些实例类型的新系统支持的数据磁盘减少了一个。
. 此实例类型比其他实例类型具有更多的本地 NVMe 磁盘，这意味着支持的数据磁盘数量较少。




==== HA 与 BYOL 对

[cols="18,18,16,16,16,16"]
|===
| 实例 | 每个节点的最大磁盘数 2+| 一个许可证的最大系统容量 2+| 多个许可证的最大系统容量 


2+|  | *仅磁盘* | *磁盘+数据分层* | *仅磁盘* | *磁盘+数据分层* 


| c5、m5 和 r5 实例 | 18 ^1^ | 288 TiB | 368 TiB | 288 TiB | 2 PiB 


 a| 
* m5dn.24xlarge
* m6id.32xlarge

| 16 ^2^ | 256 TiB | 368 TiB | 256 TiB | 2 PiB 
|===
. 18 个数据磁盘是Cloud Volumes ONTAP_新_部署的限制。如果升级使用 9.7 或更早版本创建的系统，则系统将继续支持 19 个磁盘。由于从 9.8 版本开始添加了核心磁盘，因此使用这些实例类型的新系统支持的数据磁盘减少了一个。
. 此实例类型比其他实例类型具有更多的本地 NVMe 磁盘，这意味着支持的数据磁盘数量较少。




== 存储虚拟机限制

某些配置使您能够为Cloud Volumes ONTAP创建额外的存储虚拟机 (SVM)。

https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/task-managing-svms-aws.html["了解如何创建额外的存储虚拟机"^] 。

[cols="40,60"]
|===
| 许可证类型 | 存储虚拟机限制 


| *免费增值*  a| 
总共 24 个存储虚拟机^1,2^



| *基于容量的 PAYGO 或 BYOL* ^3^  a| 
总共 24 个存储虚拟机^1,2^



| *基于节点的PAYGO*  a| 
* 1 个用于提供数据的存储虚拟机
* 1 个用于灾难恢复的存储虚拟机




| *基于节点的 BYOL* ^4^  a| 
* 总共 24 个存储虚拟机^1,2^


|===
. 根据您使用的 EC2 实例类型，该限制可能会更低。以下部分列出了每个实例的限制。
. 这 24 个存储虚拟机可以提供数据或配置用于灾难恢复 (DR)。
. 对于基于容量的许可，额外的存储虚拟机无需额外的许可费用，但每个存储虚拟机至少需支付 4 TiB 的容量费用。例如，如果您创建两个存储虚拟机，每个虚拟机具有 2 TiB 的预配置容量，则总共需要支付 8 TiB 的费用。
. 对于基于节点的 BYOL，除了默认随Cloud Volumes ONTAP附带的第一个存储虚拟机之外，每个额外的_数据服务_存储虚拟机都需要附加许可证。联系您的客户团队以获取存储虚拟机附加许可证。
+
为灾难恢复 (DR) 配置的存储虚拟机不需要附加许可证（它们是免费的），但它们会计入存储虚拟机限制。例如，如果您有 12 个数据服务存储虚拟机和 12 个为灾难恢复配置的存储虚拟机，那么您已达到限制并且无法创建任何其他存储虚拟机。





=== EC2 实例类型的存储虚拟机限制

创建额外的存储虚拟机时，需要为端口 e0a 分配私有 IP 地址。下表列出了每个接口的最大私有 IP 数量，以及部署Cloud Volumes ONTAP后端口 e0a 上可用的 IP 地址数量。可用 IP 地址的数量直接影响该配置的最大存储虚拟机数量。

下面列出的实例适用于 c5、m5 和 r5 实例系列。

[cols="6*"]
|===
| 配置 | 实例类型 | 每个接口的最大私有 IP | 部署后剩余的 IP ^1^ | 没有管理 LIF 的最大存储虚拟机数 ^2,3^ | 具有管理 LIF ^2,3^ 的最大存储虚拟机 


.9+| 单节点 | *.xlarge | 15 | 9 | 10 | 5 


| *.2xlarge | 15 | 9 | 10 | 5 


| *.4xlarge | 30 | 24 | 24 | 12 


| *.8xlarge | 30 | 24 | 24 | 12 


| *.9xlarge | 30 | 24 | 24 | 12 


| *.12xlarge | 30 | 24 | 24 | 12 


| *.16xlarge | 50 | 44 | 24 | 12 


| *.18xlarge | 50 | 44 | 24 | 12 


| *.24xlarge | 50 | 44 | 24 | 12 


.9+| *单个可用区内的 HA 对* | *.xlarge | 15 | 10 | 11 | 5 


| *.2xlarge | 15 | 10 | 11 | 5 


| *.4xlarge | 30 | 25 | 24 | 12 


| *.8xlarge | 30 | 25 | 24 | 12 


| *.9xlarge | 30 | 25 | 24 | 12 


| *.12xlarge | 30 | 25 | 24 | 12 


| *.16xlarge | 50 | 45 | 24 | 12 


| *.18xlarge | 50 | 45 | 24 | 12 


| *.24xlarge | 50 | 44 | 24 | 12 


.9+| *多可用区中的 HA 对* | *.xlarge | 15 | 12 | 13 | 13 


| *.2xlarge | 15 | 12 | 13 | 13 


| *.4xlarge | 30 | 27 | 24 | 24 


| *.8xlarge | 30 | 27 | 24 | 24 


| *.9xlarge | 30 | 27 | 24 | 24 


| *.12xlarge | 30 | 27 | 24 | 24 


| *.16xlarge | 50 | 47 | 24 | 24 


| *.18xlarge | 50 | 47 | 24 | 24 


| *.24xlarge | 50 | 44 | 24 | 12 
|===
. 此数字表示部署和设置Cloud Volumes ONTAP后，端口 e0a 上有多少个剩余的私有 IP 地址可用。例如，*.2xlarge 系统每个网络接口最多支持 15 个 IP 地址。当在单个 AZ 中部署 HA 对时，会为端口 e0a 分配 5 个私有 IP 地址。因此，使用 *.2xlarge 实例类型的 HA 对剩余 10 个私有 IP 地址可用于额外的存储虚拟机。
. 这些列中列出的数字包括BlueXP默认创建的初始存储 VM。例如，如果此列列出 24，则表示您可以创建 23 个额外的存储虚拟机，总共 24 个。
. 存储虚拟机的管理 LIF 是可选的。管理 LIF 提供与SnapCenter等管理工具的连接。
+
因为它需要私有 IP 地址，所以它会限制您可以创建的额外存储虚拟机的数量。唯一的例外是多个 AZ 中的 HA 对。在这种情况下，管理 LIF 的 IP 地址是浮动 IP 地址，因此它不计入私有 IP 限制。





== 文件和卷限制

[cols="22,22,56"]
|===
| 逻辑存储 | 参数 | 限制 


.2+| *文件* | 最大尺寸^2^ | 128 TB 


| 每卷最大数量 | 取决于容量大小，最多 20 亿 


| * FlexClone卷* | 分层克隆深度^1^ | 499 


.3+| * FlexVol卷* | 每个节点的最大值 | 500 


| 大小上限 | 20 MB 


| 最大尺寸^3^ | 300 TiB 


| *Qtree* | 每个FlexVol volume的最大值 | 4,995 


| *快照副本* | 每个FlexVol volume的最大值 | 1,023 
|===
. 分层克隆深度是可从单个FlexVol volume创建的FlexClone卷嵌套层次结构的最大深度。
. 从ONTAP 9.12.1P2 开始，限制为 128 TB。在ONTAP 9.11.1 及更早版本中，限制为 16 TB。
. 使用以下工具和最低版本支持创建最大大小为 300 TiB 的FlexVol volume：
+
** 从Cloud Volumes ONTAP 9.12.1 P2 和 9.13.0 P2 开始的系统管理器和ONTAP CLI
** 从Cloud Volumes ONTAP 9.13.1 开始的BlueXP






== iSCSI 存储限制

[cols="3*"]
|===
| iSCSI存储 | 参数 | 限制 


.4+| *LUN* | 每个节点的最大值 | 1,024 


| 最大 LUN 映射数 | 1,024 


| 最小大小 | 16 TiB 


| 每卷最大数量 | 512 


| *igroups* | 每个节点的最大值 | 256 


.2+| *发起者* | 每个节点的最大值 | 512 


| 每个 igroup 的最大值 | 128 


| iSCSI 会话 | 每个节点的最大值 | 1,024 


.2+| *LIF* | 每个端口的最大值 | 32 


| 每个端口集的最大值 | 32 


| *端口集* | 每个节点的最大值 | 256 
|===